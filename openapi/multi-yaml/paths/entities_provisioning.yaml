post:
  summary: Product Provisioning 
  description: |
    Provision a business for a specific JustiFi product, e.g. `payment`. 
    When provisioning a business for the payment product this endpoint will automatically create a sub account for this business
    which is needed for payment processing.

    Prerequisites for provisioning a business for the payment product are
    1. Create a [business](https://docs.justifi.tech/api-spec#tag/Business/operation/CreateBusiness)
    2. Create a [payout bank account](https://docs.justifi.tech/api-spec#tag/Bank-Account/operation/CreateBankAccount) for that business 
    3. Accept the [terms and conditions](https://docs.justifi.tech/api-spec#tag/Terms-and-Conditions/operation/TermsAndConditions) for the business 
  operationId: ProductProvisioning
  tags:
    - Provisioning
  parameters:
    - $ref: ../components/parameters/authorization-header.yaml
  requestBody:
    required: true
    content:
      application/json:
        schema:
          properties:
            new_account_name:
              type: string
              example: "JustiFi"
              description: account name (must be unique), ideally the legal name of the business that is provisioned
            business_id:
              type: string
              example: "biz_123"
              description: business associated with the account
            product_category:
              type: string
              example: "payment"
              description: type of product to be provisioned
          required:
            - new_account_name
            - business_id
            - product_category

  responses:
    '201':
      description: Provisioning successfully
      content:
        application/json:
          schema:
            allOf:
              - $ref: ../components/schemas/Envelope.yaml
              - properties:
                  type:
                    example: onboarding
                  data:
                    $ref: ../components/schemas/ProvisioningResponse.yaml
