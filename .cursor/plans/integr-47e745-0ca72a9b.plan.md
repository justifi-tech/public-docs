<!-- 0ca72a9b-320b-4561-9d84-3f8fae929f9c 505d57e7-9a31-433b-b3c6-42879136dbbc -->
# Web Component Docs Integration Plan

## Scope

- Mount `@justifi/webcomponents` package MDX as an additional docs set under `/web-components` with its own sidebar.
- Add a top navbar item “Web Components” next to “Api Specification”.
- Add a version switcher for the Web Component Docs using Docusaurus versioning (minor versions).
- Remove the external Storybook link from the navbar.
- Keep WC docs content out of VCS; hydrate versions from NPM at build time.

## Architecture

- Second docs plugin instance (id: `web-components`) that reads from `node_modules/@justifi/webcomponents/docs`.
- Autogenerated sidebar for the WC docs via a dedicated `sidebars.web-components.js`.
- Navbar: a `doc` link to WC landing page and a `docsVersionDropdown` scoped to the `web-components` plugin.
- Versioning: Generate `versions-web-components.json` and `versioned_docs/version-web-components/*` at build time by fetching specific NPM minors. Nothing checked in.

## Key Edits

- docusaurus.config.ts: add plugin instance, navbar items, remove Storybook link, enable client redirects if needed.
- Add `sidebars.web-components.js` with autogenerated sidebar.
- package.json: add dependency `@justifi/webcomponents`, build hooks and script (`hydrate-wc-versions`).
- scripts/: add `hydrate-web-components-versions.(ts|js)`.
- .gitignore: ignore `versioned_docs/version-web-components` and `versioned_sidebars/version-web-components` if generated.

## Sample Config Snippets

- Additional docs plugin (assumes docs at `docs/` inside the package, index slug is `index`):
```ts
// docusaurus.config.ts (excerpt)
plugins: [
  [
    '@docusaurus/plugin-content-docs',
    {
      id: 'web-components',
      path: 'node_modules/@justifi/webcomponents/docs',
      routeBasePath: 'web-components',
      sidebarPath: require.resolve('./sidebars.web-components.js'),
      includeCurrentVersion: true,
      // Versioning still works; we hydrate versioned folders and versions file prebuild
    },
  ],
];

// Navbar items
navbar: {
  items: [
    // ... keep Api Specification item ...
    {
      type: 'doc',
      docsPluginId: 'web-components',
      docId: 'index',
      label: 'Web Components',
      position: 'left',
    },
    {
      type: 'docsVersionDropdown',
      docsPluginId: 'web-components',
      position: 'right',
      dropdownActiveClassDisabled: true,
    },
  ],
}
```

- Autogenerated sidebar for WC docs:
```js
// sidebars.web-components.js
module.exports = {
  wc: [{ type: 'autogenerated', dirName: '.' }],
};
```


## Build-Time Hydration (No Check-ins)

- `hydrate-web-components-versions` script:
  - Inputs: list of supported minors (e.g., from `scripts/wc-versions.json` or env `WC_VERSIONS` like `["1.2","1.3"]`).
  - For each minor `x.y`:

1) Download the npm tarball for the highest patch in `x.y` or use `@justifi/webcomponents@x.y` if tagged.

2) Extract `/package/docs/**` to `.wc-tmp/x.y/docs`.

3) Copy to `versioned_docs/version-web-components/version-x.y/**`.

  - Generate/overwrite `versions-web-components.json` with `["x.y", ...]` ordered newest→oldest.
  - Duplicate current sidebar into `versioned_sidebars/version-web-components-sidebars.json` if needed.
- `current` (unversioned) points to local `node_modules/@justifi/webcomponents/docs` for the latest installed package.

## Versioning Workflow

- To add a new minor:

1) Publish `@justifi/webcomponents@x.y.z`.

2) Update `scripts/wc-versions.json` to include `x.y` (and optionally drop oldest).

3) Bump dependency range for `@justifi/webcomponents` to latest.

4) Build runs `hydrate-web-components-versions` before `docusaurus build`.

## Assumptions

- Package docs live at `@justifi/webcomponents/docs` and expose stable slugs; an `index.mdx` exists.
- We’ll support a curated list of minors (e.g., last 3); configurable via JSON/env.

### To-dos

- [ ] Add docs plugin instance reading from node_modules path for Web Components
- [ ] Create autogenerated WC sidebar file sidebars.web-components.js
- [ ] Add nav link to WC docs and version dropdown for plugin
- [ ] Remove external Storybook navbar link
- [ ] Wire prebuild script and package.json commands for hydration and rewrite
- [ ] Ignore versioned WC folders in .gitignore if generated
- [ ] QA build: sidebar, nav, version switcher, links, search, sitemaps
- [ ] Document the version bump + hydration workflow in README