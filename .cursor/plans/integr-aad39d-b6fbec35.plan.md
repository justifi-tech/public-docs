<!-- b6fbec35-ed9a-41eb-b124-7ced98d01630 d36c0940-59e3-42f2-8dc0-1cfd4a2802c8 -->
# Integrate Web Components docs into this site

## Sources and assumptions

- Source repo: [`justifi-tech/web-component-library`](https://github.com/justifi-tech/web-component-library) (public)
- Docs live alongside components under `packages/webcomponents/src/components/<Component>/docs/*` and general docs under `packages/webcomponents/src/docs/*` ([package.json confirms Stencil package location](https://raw.githubusercontent.com/justifi-tech/web-component-library/main/packages/webcomponents/package.json)).
- High-level content scope follows your spec: [Notion plan](https://www.notion.so/Developer-Documentation-Consolidation-Proposal-28041b33818e80d9a02de380f46f3e68).

## What we will add to THIS repo

1) Create a dedicated docs plugin instance for Web Components

- Add a second `@docusaurus/plugin-content-docs` instance in [`/Users/tiagosaftfuelber/justifi-tech/public-docs/docusaurus.config.ts`](./Users/tiagosaftfuelber/justifi-tech/public-docs/docusaurus.config.ts)
- id: `web-components`
- path: `wc-docs` (new folder in repo root)
- routeBasePath: `web-components`
- sidebar: `sidebars.web-components.ts` with autogenerated sidebar
- enable versioning for this plugin instance (see Versioning below)

2) Create the local docs structure for synced content

- New folders:
- [`/Users/tiagosaftfuelber/justifi-tech/public-docs/wc-docs/`](./Users/tiagosaftfuelber/justifi-tech/public-docs/wc-docs/)
- `overview/` (landing and intro)
- `guides/` (library guides)
- `components/<Component>/` (one folder per component)
- [`/Users/tiagosaftfuelber/justifi-tech/public-docs/static/img/web-components/`](./Users/tiagosaftfuelber/justifi-tech/public-docs/static/img/web-components/)
- Add `_category_.json` per top folder to shape sidebar labels.
- Seed `wc-docs/overview/intro.mdx` as section landing page.

3) Add a sync script to copy content from the source repo

- New script file: [`/Users/tiagosaftfuelber/justifi-tech/public-docs/scripts/sync-web-components-docs.mjs`](./Users/tiagosaftfuelber/justifi-tech/public-docs/scripts/sync-web-components-docs.mjs)
- Uses GitHub REST API to list and fetch files from:
- `packages/webcomponents/src/docs/**/*.(md|mdx)` → `wc-docs/guides/` and `wc-docs/overview/`
- `packages/webcomponents/src/components/*/docs/**/*.(md|mdx)` → `wc-docs/components/<Component>/`
- Copies referenced assets (png/svg/webp/gif) to `static/img/web-components/<Component>/...`
- Rewrites relative asset paths in MD/MDX to `/img/web-components/...`
- Normalizes extensions to `.mdx` and preserves frontmatter (`title`, `description`, optional `slug`, `sidebar_label`).
- Add npm scripts in [`/Users/tiagosaftfuelber/justifi-tech/public-docs/package.json`](./Users/tiagosaftfuelber/justifi-tech/public-docs/package.json):
- `sync:webcomponents`: `node scripts/sync-web-components-docs.mjs`
- `build` chain can optionally run the sync in CI before build.

4) Navbar updates

- In [`docusaurus.config.ts`](./Users/tiagosaftfuelber/justifi-tech/public-docs/docusaurus.config.ts):
- Add a top-level item `{ to: '/web-components/overview/intro', label: 'Web Components', position: 'right' }`.
- Add a version dropdown for this docs instance: `{ type: 'docsVersionDropdown', position: 'right', docsPluginId: 'web-components' }`.
- Remove the external Storybook link.

5) Versioning setup (per-plugin)

- Enable versioning for the `web-components` plugin instance in `docusaurus.config.ts`.
- Create `wc-docs/versions.json` on first versioning.
- Add a helper script `scripts/version-web-components.mjs` that runs `docusaurus docs:version web-components <version>` (uses plugin id) so we can cut a docs version that corresponds to the library release (e.g., `6.4`).
- The navbar will show a version switcher tied specifically to the `web-components` docs.

6) CI automation (recommended)

- New GitHub Action in this repo:
- Triggers:
- On schedule (e.g., daily) and
- On `repository_dispatch` or on release/tag from `web-component-library`.
- Steps: checkout → run `pnpm install` → `pnpm sync:webcomponents` → open PR if changes detected.
- Optional: when a tag matching `@justifi/webcomponents@x.y.z` is released, run `scripts/version-web-components.mjs x.y` then sync and open PR.

## Minimal changes required in web-component-library (high-level)

1) File placement and naming

- For each component: `packages/webcomponents/src/components/<Component>/docs/`
- `index.mdx` (component overview)
- `examples/*.mdx` (optional)
- `assets/*` (images) → use relative paths `./assets/...`
- General docs: `packages/webcomponents/src/docs/`
- `overview/intro.mdx`, `guides/*.mdx`

2) Frontmatter conventions (to play well with Docusaurus)

- Each MD/MDX page should include:
- `title`, `description`
- optional `sidebar_label`, `slug`
- Avoid repo-local absolute links; prefer relative links within each `docs` folder.

3) MDX scope and components

- Keep content as Markdown/MDX without Storybook-specific imports.
- Use standard MDX/Docusaurus features: admonitions (`:::tip`), code blocks, tabs (`@theme/Tabs`).

4) Asset and link hygiene

- Reference images as `./assets/<file>`; the sync script will relocate and rewrite to `/img/web-components/...` in this site.
- For cross-component links, prefer relative doc links; our sync script preserves folder structure under `wc-docs/components/`.

5) Version alignment

- Decide the mapping from package versions to docs versions (e.g., `6.4.x` → `6.4`).
- On publish/release, emit a GitHub Action that calls this site’s `repository_dispatch` with `{version: '6.4'}` to cut docs version.

## Notes on alternatives

- Instead of API-based sync, we could use a git submodule (`vendor/web-component-library/`) and copy from the working tree during build. This adds `git submodule` maintenance but allows offline sync.
- `git subtree` would bring a large history snapshot; API-based sync keeps this repo slim by importing only docs and assets.

## Deliverables

- A new `/web-components` section under the main navbar with its own sidebar and version switcher.
- Automated sync from the source repo to keep docs current.
- Storybook link removed from navbar.

## Citations

- Source repo: [`justifi-tech/web-component-library`](https://github.com/justifi-tech/web-component-library)
- Stencil package metadata: [`packages/webcomponents/package.json`](https://raw.githubusercontent.com/justifi-tech/web-component-library/main/packages/webcomponents/package.json)
- Consolidation plan: [Notion](https://www.notion.so/Developer-Documentation-Consolidation-Proposal-28041b33818e80d9a02de380f46f3e68)

### To-dos

- [ ] Add second docs plugin (id wc) in docusaurus.config.ts
- [ ] Create sidebars.webcomponents.ts or enable autogenerated sidebars
- [ ] Add 'Web Components' link in main sidebars.ts
- [ ] Set up git subtree for external/web-components from source repo
- [ ] Implement docs:export script in web-component-library
- [ ] Enable versioning for wc plugin and define labels
- [ ] Document release flow: sync, version, commit